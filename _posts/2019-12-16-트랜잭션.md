---
published: true
layout: single
title: "트랜잭션"
category:
  - 데이타베이스
date : 2019-12-16 19:10:00


---

## 트랜잭션

트랜잭션은 디스크로부터 메인 메모리로 데이타를 입력하여 처리하고 디스크로 출력한다.

입 / 출력 연산은 블록 단위로 수행한다.

<br/>

Input(B<sub>i</sub>) : 디스크에서 메인 메모리로 B<sub>i</sub> 블록을 이동시킨다.

Output(B<sub>j</sub>) : 메인 메모리에서 디스크로 B<sub>j</sub> 블록을 이동시킨다.

<br/>

Read(X) : 데이타 X의 값을 지역 변수 x에 지정한다.

Write(X) : 지역 변수 x를 버퍼블록에 있는 데이타 X에 지정한다.

만약 데이타 X가 버퍼 블록에 없으면 위 두 동작은 B<sub>x</sub>에 대해 Input(B<sub>x</sub>)를 실행한다.

<br/>

**트랜잭션** : 하나의 논리적 기능을 수행하기 위한 작업의 단위이다.

<br/>

**4가지의 특성**

- 원자성 : 자기의 연산을 전부 또는 전무 (All and not) 실행한다.
- 일관성 : 실행을 성공적으로 완료하면 언제나 일관성 있는 데이타베이스 상태이다.
- 격리성 : 트랜잭션이 실행 중에 있는 연산의 중간 결과는 다른 트랜잭션이 접근할 수 없다.
- 영속성 : 실행을 완료하면 그 결과는 영속적이다.



<hr/>

계좌 A ( 1000 원) 에서 100원을 계좌 B(2000 원)에 이체하는 트랜잭션

T : Begin_Trans<br/>
	Read(A)<br/>
	A = A - 100  	-> *A=900*<br/>
	Write(A)<br/>
	Read(B)			 -> *실행시키기 위해 Input(B<sub>B</sub>)를 실행시켜 디스크에서 메인메모리로 옮긴다.*<br/>
	B = B + 100	  -> *B = 2100*<br/>
	Write(B)<br/>
	End_Trans<br/>	

<br/>

*위의 결과는 Output(B<sub>A</sub>)와 Output(B<sub>B</sub>)가 실행되지 않았기 때문에*

메인메모리 A = 900 , B = 2100

디스크 A = 1000, B = 2000

*인 상태이다.*



*위의 상태에서 Output(B<sub>A</sub>)를 수행하고 Output(B<sub>B</sub>)를 실행 중에 장애가 일어나면*

디스크 A = 900, B = 2000

*로써 모순상태가 발생한다.*



### 트랜잭션의 연산

- Commit(완료) : 성공적으로 종료
- Rollback(복귀) : 실행이 실패 -> 원상복귀

### 디스크 갱신

- 원위치 갱신
- 간접 갱신