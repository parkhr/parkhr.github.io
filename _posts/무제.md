## 쓰레드

프로그램 내부의 흐름

다중 쓰레드 : 한 프로그램에 2개 이상의 쓰레드 -> 쓰레드가 빠른시간 간격으로 스위칭 되기 때문에 동시에 실행되는 것처럼 느낀다.

ex) Web browser : 화면 출력 쓰레드 + 데이터 읽어오는 쓰레드

​     Word processor : 화면 출력 + 키보드 입력 + 철자 / 문법 오류 확인

<br/>

***요새 운영체제는 context switching 단위가 프로세스가 아닌 쓰레드이다.*** 

<br/><br/>

### 쓰레드의 구조

- 프로세스의 메모리 공간 공유 (code, data)
- 프로세스의 자원 공유 (file, i/o, ...)
- 비공유 : 개별적인 PC, registers, stack ...

<br/><br/>

## 프로세스 동기화(쓰레드 동기화)

여러개의 프로세스가 공유된 자원을 동시에 접근할 때 일관성이 유지될 수 있도록 하는것

프로세스 동기화의 목적

- 임계구역 문제 해결
- 프로세스 실행 순서 제어 (원하는 대로)
- Busy wait 등 비효율성 제거

<br/><br/>

## 임계구역(critical section)

여러개의 쓰레드로 구성된 시스템에서 각 쓰레드는 임계구역이라고 하는 코드 세그먼트가 있다

ex) 공통변수를 변화, 테이블 업데이터, 파일쓰기 등등...

parent 클래스에서 공통변수 a를 +1 하는 작업을 하고, child 클래스에서 -1 하는 작업을 할 때,

a 를 공통변수라 한다. 이 공통변수를 이용하여 작업을 수행하는 부분을 임계구역(critical section) 이라 한다.

임계구역은 동시에 여러 프로세스가 사용할 수 없다는 것을 말한다.

<br/><br/>

임계구역의 3가지 요구조건

- 상호배타 : 오직 한 쓰레드만 진입
- 진행 : 임계구역을 사용하고 있지 않다면, 다른 프로세스가 접근할 수 있도록 한다.
- 한정된 대기 (유한한 대기) : 같은 프로세스가 독점해서 사용하지 않도록, 다른 프로세스들이 기아 상태에 빠지지 않도록

<br/><br/>

## 동기화 하기 위한 도구 ( 세마포어 , 모니터)

## 세마포어

공유된 자원에 여러 개의 프로세스가 동시에 접근하면서 발생하는 문제를 해결하기 위해 만들어진 것

최초의 S의 값은 1

P(S) 를 먼저 수행하는 프로세스가 S = 0 로 변경 후 critical section에 진입한다.

critical section에 진입한 프로세스가 작업을 마친 후 V(S)를 수행하여 S = 1 로 변경

P(S)에서 대기하고 있던 프로세스가 진행 …. —> 반복

<br/>

==> S = 1 이면, critical section에 프로세스 존재하지 않음    S = 0 이면 프로세스 존재

<br/><br/>









