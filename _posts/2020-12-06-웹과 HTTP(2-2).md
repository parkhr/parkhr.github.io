---
published: true
layout: single
title: "2-2 웹과 HTTP"
category:
  - 네트워크
date : 2020-12-06 14:36:00
---

## HTTP 개요

HTTP는 메시지의 구조 및 클라이언트와 서버가 메시지를 어떻게 교환하는지에 대해 정의한 것이다.

웹 페이지는 객체들로 구성이 된다. 객체는 단순히 단일 URL로 지정할 수 있는 하나의 파일이다.

예를 들어, 웹페이지가 HTML 텍스트와 5개의 JPEG 이미지로 구성되어 있으면 이 웹페이지는 6개의 객체를 가지고 있는것 이다.

HTTP 요청-응답 과정

1. 사용자가 웹 페이지를 요청한다.
2. 브라우저가 HTTP 요청 메시지를 서버에게 보낸다.
3. 서버는 요청을 수신 후 객체를 포함한 HTTP 응답 메시지로 응답한다.

HTTP는 비상태 프로토콜이다.

서버는 클라이언트에 대한 정보를 유지하지 않는다. 

→ 특정 클라이언트가 같은 객체를 두 번 요청한다면, 서버는 이전에 한 일을 기억하지 않으므로 같은 객체를 또 보낸다.

## 비지속 연결과 지속 연결

HTTP 는 주로 TCP 전송 프로토콜을 이용하여 메시지를 전송하는데, 

각 요구/응답 쌍이 분리된 TCP 연결상으로 보내지는 것을 비지속 연결

각 요구/응답 쌍이 같은 TCP 연결상으로 보내지는 것을 지속연결이라 한다.

### 비지속 연결

예를 들어, 한 웹 페이지가 HTML 파일, 10 개의 JPEG 이미지로 구성되어 있고 (11개의 객체)

url은 [www.test.com/index.html](http://www.test.com/index.html) 이라고 가정하자.

해당 경로의 웹페이지를 불러오기 위해서 연결 수행 과정은 다음과 같다.

1. 클라이언트는 HTTP를 통해 [www.test.com](http://www.test.com) 서버로 TCP 연결을 시도한다.
2. 연결 후 클라이언트는 서버에게 HTTP 요청 메시지를 보낸다.
3. 서버는 클라이언트의 HTTP 요청 메시지를 수신하고 [www.test.com/index.html](http://www.test.com/index.html) 객체를 포함한 HTTP 응답 메시지를 클라이언트에게 보낸다.
4. TCP 연결이 중단된다.
5. 이후 모든 JPEG 객체를 로딩할때까지 1~4를 반복한다.

위의 연결 수행 과정 처럼 비지속 연결은 TCP 연결을 맺고 끊음을 반복한다. 모든 객체를 로딩하기 위해서

11번의 TCP 연결이 필요하다.

### 지속 연결

비지속 연결과는 다르게 TCP 연결을 그대로 유지한다. 그 후 HTTP 서버는 일정 기간 사용되지 않으면 연결을 닫는다.

## HTTP 메시지 포맷

### HTTP 요청 메시지

```
GET /index.html HTTP/1.1
Host : www.test.com
Connection: close
User-agent : Mozilla/5.0
Accept-language : fr

개체 몸체
```

1번째 라인 : method 필드, URL 필드, HTTP 버전

2번째 라인 : 호스트 명시

3번째 라인 : 지속연결 유무

4번째 라인 : 브라우저 타입

5번째 라인 : 사용언어

개체 몸체 : GET 방식에서는 비어 있고, POST 방식에서 사용된다.

### HTTP 응답 메시지

```
HTTP/1.1 200 OK
Connection: close
Date: Tue, 18 Aug 2015 15:44:04 GMT
Server: Apache/2.2.3
Last-Modified: Tue, 18 Aug 2015 15:11:03 GMT
Content-Length: 6821
Content-Type: text/html

(데이터 .................)
```

1번째 라인 : HTTP 버전, 상태 코드, 해당 상태 메시지

2번째 라인 : TCP 연결을 닫는데 사용

3번째 라인 : HTTP 응답이 서버에 의해 생성되고 보낸 날짜와 시간

4번째 라인 : 서버

5번째 라인 : 객체가 생성되거나 마지막으로 수정된 시간과 날짜를 나타낸다.

6번째 라인 : 송신되는 객체의 바이트 수

7번째 라인 : 객체 타입

데이터 : 요청 객체 데이터

## 쿠키

HTTP 는 사용자의 정보를 저장하지 않는다. 하지만 사용자에 따라 콘텐츠를 제공하고 싶을 때가 있다.

( 장바구니 )

이를 위해 쿠키를 사용한다.

## 웹 캐싱

### 조건부 GET