---
published: true
layout: single
title: "프록시 패턴"
category:
    - Design Pattern
date : 2019-07-09 12:30:00
---

## 프록시 패턴

실제 작업을 행하는 오브젝트를 감싸서, 실제 오브젝트를 요청하기 전이나 후에 인가 처리나, 생성 자원이 많이 드는 작업에 대해 원격 메소드를 호출하기 위한 작업 등을 하는 사용한다.

<br/>



```java
public interface Payment {
    void pay(int mount);
}
```

<br/>

Cash 클래스는 현금을 결제하는 행위를 하는 클래스이다.

```java
public class Cash implements Payment{
    @Override
    public void pay(int amount){
        System.out.println(amount + "  현금 결제");
    }
}

```

<br/>



CashPerf가 프록시 역할을 하는데 Cash 클래스의 메서드 pay가 실행될 때 마다

sysout이 위 아래로 찍힌다.

```java
public class CashPerf implements Payment {
    Payment cash = new Cash();

    @Override
    public void pay(int amount){
        System.out.println("결제 준비중");
        cash.pay(amount);
        System.out.println("결제 완료");
    }
}

```

<br/>

Store 클래스를 만들어서 Store에서 현금 결제를 한다.

```java
public class Store {
    Payment payment;

    public Store(Payment payment){
        this.payment = payment;
    }

    public void buySomething(int amount){
        payment.pay(amount);
    }
}

```

<br/>

```java
public class StoreTest {
    @Test
    public void testPay(){
        Payment cashPerf = new CashPerf();
        Store store = new Store(cashPerf);
        store.buySomething(100);
    }
}
```

<br/>

결론적으로 실제 작업을 행하는 Cash를 요청하기 전이나 후에 원격 메소드를 호출한다. 

실제 로직과 인가 처리를 분리하여 프로그래밍을 할 수도 있고 각각 로직에 대해 좀 더 집중할 수 있다.